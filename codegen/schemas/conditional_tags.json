{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Conditional Tags Configuration",
  "description": "Configuration for extracting complex conditional tag definitions from ExifTool modules",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "source": {
      "type": "string",
      "description": "Path to ExifTool source file (relative to repository root, e.g., 'third-party/exiftool/lib/Image/ExifTool/Canon.pm')",
      "pattern": "^third-party/exiftool/"
    },
    "description": {
      "type": "string",
      "description": "Overview of what these conditional tag definitions contain"
    },
    "table": {
      "type": "string",
      "description": "Name of the tag table to extract conditional definitions from (e.g., 'Main')"
    },
    "filters": {
      "type": "object",
      "description": "Filtering criteria for conditional tag extraction",
      "properties": {
        "include_count_conditions": {
          "type": "boolean",
          "description": "Whether to include count-based conditions ($count == value)",
          "default": true
        },
        "include_binary_patterns": {
          "type": "boolean",
          "description": "Whether to include binary pattern matching conditions ($$valPt =~ /regex/)",
          "default": true
        },
        "include_format_conditions": {
          "type": "boolean",
          "description": "Whether to include format-dependent conditions ($format eq 'type')",
          "default": true
        },
        "include_cross_tag_dependencies": {
          "type": "boolean",
          "description": "Whether to include cross-tag dependencies and state management",
          "default": true
        },
        "min_complexity": {
          "type": "string",
          "enum": [
            "simple",
            "moderate",
            "complex"
          ],
          "description": "Minimum complexity level of conditions to include",
          "default": "simple"
        }
      },
      "additionalProperties": false
    },
    "extraction_options": {
      "type": "object",
      "description": "Options for controlling the extraction process",
      "properties": {
        "preserve_perl_syntax": {
          "type": "boolean",
          "description": "Whether to preserve original Perl syntax in condition strings",
          "default": true
        },
        "normalize_whitespace": {
          "type": "boolean",
          "description": "Whether to normalize whitespace in condition expressions",
          "default": true
        },
        "include_metadata": {
          "type": "boolean",
          "description": "Whether to include additional metadata fields (RawConv, ValueConv, etc.)",
          "default": true
        }
      },
      "additionalProperties": false
    }
  },
  "required": [
    "source",
    "table"
  ],
  "additionalProperties": false
}
