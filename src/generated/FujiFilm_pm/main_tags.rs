//! Generated tag table definitions from FujiFilm::Main
//!
//! This file is auto-generated by codegen/src/strategies/tag_kit.rs. Do not edit manually.

use crate::types::{PrintConv, TagInfo, ValueConv};
use std::collections::HashMap;
use std::sync::LazyLock;

// Generated imports for conversion functions
use crate::generated::functions::hash_15::ast_print_15d3bbdbc77bdb90;
use crate::generated::functions::hash_60::ast_value_6024bbf5fa17668a;
use crate::generated::functions::hash_64::ast_print_647e3531415500d9;
use crate::generated::functions::hash_76::ast_print_76b92beaaba5ca0b;
use crate::generated::functions::hash_99::ast_print_99f2663c86a2cff;
use crate::generated::functions::hash_b6::ast_value_b6e279789541d533;
use crate::generated::functions::hash_b9::ast_print_b93bf01b5173ce30;

/// Tag definitions for FujiFilm::Main table
pub static FUJI_FILM_MAIN_TAGS: LazyLock<HashMap<u16, TagInfo>> = LazyLock::new(|| {
    HashMap::from([
        (
            0,
            TagInfo {
                name: "Version",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16,
            TagInfo {
                name: "InternalSerialNumber",
                format: "unknown",
                print_conv: Some(PrintConv::Function(ast_print_99f2663c86a2cff)),
                value_conv: None,
            },
        ),
        (
            4096,
            TagInfo {
                name: "Quality",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4097,
            TagInfo {
                name: "Sharpness",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4098,
            TagInfo {
                name: "WhiteBalance",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4099,
            TagInfo {
                name: "Saturation",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4100,
            TagInfo {
                name: "Contrast",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4101,
            TagInfo {
                name: "ColorTemperature",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4102,
            TagInfo {
                name: "Contrast",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4106,
            TagInfo {
                name: "WhiteBalanceFineTune",
                format: "unknown",
                print_conv: Some(PrintConv::Function(ast_print_647e3531415500d9)),
                value_conv: None,
            },
        ),
        (
            4107,
            TagInfo {
                name: "NoiseReduction",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4110,
            TagInfo {
                name: "NoiseReduction",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4111,
            TagInfo {
                name: "Clarity",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4112,
            TagInfo {
                name: "FujiFlashMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4113,
            TagInfo {
                name: "FlashExposureComp",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4128,
            TagInfo {
                name: "Macro",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4129,
            TagInfo {
                name: "FocusMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4130,
            TagInfo {
                name: "AFMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4131,
            TagInfo {
                name: "FocusPixel",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4139,
            TagInfo {
                name: "PrioritySettings",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4141,
            TagInfo {
                name: "FocusSettings",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4142,
            TagInfo {
                name: "AFCSettings",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4144,
            TagInfo {
                name: "SlowSync",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4145,
            TagInfo {
                name: "PictureMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4146,
            TagInfo {
                name: "ExposureCount",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4147,
            TagInfo {
                name: "EXRAuto",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4148,
            TagInfo {
                name: "EXRMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4151,
            TagInfo {
                name: "MultipleExposure",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4160,
            TagInfo {
                name: "ShadowTone",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4161,
            TagInfo {
                name: "HighlightTone",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4164,
            TagInfo {
                name: "DigitalZoom",
                format: "unknown",
                print_conv: None,
                value_conv: Some(ValueConv::Function(ast_value_6024bbf5fa17668a)),
            },
        ),
        (
            4165,
            TagInfo {
                name: "LensModulationOptimizer",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4167,
            TagInfo {
                name: "GrainEffectRoughness",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4168,
            TagInfo {
                name: "ColorChromeEffect",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4169,
            TagInfo {
                name: "BWAdjustment",
                format: "int8s",
                print_conv: Some(PrintConv::Function(ast_print_b93bf01b5173ce30)),
                value_conv: None,
            },
        ),
        (
            4171,
            TagInfo {
                name: "BWMagentaGreen",
                format: "int8s",
                print_conv: Some(PrintConv::Function(ast_print_b93bf01b5173ce30)),
                value_conv: None,
            },
        ),
        (
            4172,
            TagInfo {
                name: "GrainEffectSize",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4173,
            TagInfo {
                name: "CropMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4174,
            TagInfo {
                name: "ColorChromeFXBlue",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4176,
            TagInfo {
                name: "ShutterType",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4177,
            TagInfo {
                name: "CropFlag",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4178,
            TagInfo {
                name: "CropTopLeft",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4179,
            TagInfo {
                name: "CropSize",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4353,
            TagInfo {
                name: "SequenceNumber",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4354,
            TagInfo {
                name: "WhiteBalanceBracketing",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4355,
            TagInfo {
                name: "DriveSettings",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4357,
            TagInfo {
                name: "PixelShiftShots",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4358,
            TagInfo {
                name: "PixelShiftOffset",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4432,
            TagInfo {
                name: "CompositeImageMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4433,
            TagInfo {
                name: "CompositeImageCount1",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4434,
            TagInfo {
                name: "CompositeImageCount2",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4435,
            TagInfo {
                name: "PanoramaAngle",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            4436,
            TagInfo {
                name: "PanoramaDirection",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4609,
            TagInfo {
                name: "AdvancedFilter",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4624,
            TagInfo {
                name: "ColorMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4864,
            TagInfo {
                name: "BlurWarning",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4865,
            TagInfo {
                name: "FocusWarning",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4866,
            TagInfo {
                name: "ExposureWarning",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            4868,
            TagInfo {
                name: "GEImageSize",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5120,
            TagInfo {
                name: "DynamicRange",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5121,
            TagInfo {
                name: "FilmMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5122,
            TagInfo {
                name: "DynamicRangeSetting",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5123,
            TagInfo {
                name: "DevelopmentDynamicRange",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5124,
            TagInfo {
                name: "MinFocalLength",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5125,
            TagInfo {
                name: "MaxFocalLength",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5126,
            TagInfo {
                name: "MaxApertureAtMinFocal",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5127,
            TagInfo {
                name: "MaxApertureAtMaxFocal",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5131,
            TagInfo {
                name: "AutoDynamicRange",
                format: "unknown",
                print_conv: Some(PrintConv::Function(ast_print_15d3bbdbc77bdb90)),
                value_conv: None,
            },
        ),
        (
            5154,
            TagInfo {
                name: "ImageStabilization",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5157,
            TagInfo {
                name: "SceneRecognition",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5169,
            TagInfo {
                name: "Rating",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5174,
            TagInfo {
                name: "ImageGeneration",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5176,
            TagInfo {
                name: "ImageCount",
                format: "unknown",
                print_conv: None,
                value_conv: Some(ValueConv::Function(ast_value_b6e279789541d533)),
            },
        ),
        (
            5187,
            TagInfo {
                name: "DRangePriority",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5188,
            TagInfo {
                name: "DRangePriorityAuto",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5189,
            TagInfo {
                name: "DRangePriorityFixed",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            5190,
            TagInfo {
                name: "FlickerReduction",
                format: "unknown",
                print_conv: Some(PrintConv::Function(ast_print_76b92beaaba5ca0b)),
                value_conv: None,
            },
        ),
        (
            5191,
            TagInfo {
                name: "FujiModel",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5192,
            TagInfo {
                name: "FujiModel2",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5194,
            TagInfo {
                name: "WBRed",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5195,
            TagInfo {
                name: "WBGreen",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5196,
            TagInfo {
                name: "WBBlue",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            5197,
            TagInfo {
                name: "RollAngle",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            14339,
            TagInfo {
                name: "VideoRecordingMode",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            14340,
            TagInfo {
                name: "PeripheralLighting",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            14342,
            TagInfo {
                name: "VideoCompression",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            14368,
            TagInfo {
                name: "FrameRate",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            14369,
            TagInfo {
                name: "FrameWidth",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            14370,
            TagInfo {
                name: "FrameHeight",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            14372,
            TagInfo {
                name: "FullHDHighSpeedRec",
                format: "unknown",
                print_conv: Some(PrintConv::Complex),
                value_conv: None,
            },
        ),
        (
            16389,
            TagInfo {
                name: "FaceElementSelected",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16640,
            TagInfo {
                name: "FacesDetected",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16643,
            TagInfo {
                name: "FacePositions",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16896,
            TagInfo {
                name: "NumFaceElements",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16897,
            TagInfo {
                name: "FaceElementTypes",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            16899,
            TagInfo {
                name: "FaceElementPositions",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            17026,
            TagInfo {
                name: "FaceRecInfo",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            32768,
            TagInfo {
                name: "FileSource",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            32770,
            TagInfo {
                name: "OrderNumber",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            32771,
            TagInfo {
                name: "FrameNumber",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            45585,
            TagInfo {
                name: "Parallax",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
    ])
});

/// Apply ValueConv transformation for tags in this table
pub fn apply_value_conv(
    tag_id: u32,
    value: &crate::types::TagValue,
    _errors: &mut Vec<String>,
) -> Result<crate::types::TagValue, crate::types::ExifError> {
    let tag_id_u16 = tag_id as u16;
    if let Some(tag_def) = FUJI_FILM_MAIN_TAGS.get(&tag_id_u16) {
        if let Some(ref value_conv) = tag_def.value_conv {
            match value_conv {
                ValueConv::None => Ok(value.clone()),
                ValueConv::Function(func) => func(value, None).map_err(|e| e.into()),
                ValueConv::Expression(_expr) => {
                    // Runtime expression evaluation removed - all Perl interpretation happens via PPI at build time
                    Err(crate::types::ExifError::NotImplemented("Runtime expression evaluation not supported - should be handled by PPI at build time".to_string()))
                }
                _ => Ok(value.clone()),
            }
        } else {
            Ok(value.clone())
        }
    } else {
        Err(crate::types::ExifError::ParseError(format!(
            "Tag 0x{:04x} not found in table",
            tag_id
        )))
    }
}

/// Apply PrintConv transformation for tags in this table
pub fn apply_print_conv(
    tag_id: u32,
    value: &crate::types::TagValue,
    _errors: &mut Vec<String>,
    _warnings: &mut Vec<String>,
) -> crate::types::TagValue {
    let tag_id_u16 = tag_id as u16;
    if let Some(tag_def) = FUJI_FILM_MAIN_TAGS.get(&tag_id_u16) {
        if let Some(ref print_conv) = tag_def.print_conv {
            match print_conv {
                PrintConv::None => value.clone(),
                PrintConv::Function(func) => func(value, None),
                PrintConv::Expression(_expr) => {
                    // Runtime expression evaluation removed - all Perl interpretation happens via PPI at build time
                    value.clone() // Fallback to original value when expression not handled by PPI
                }
                _ => value.clone(),
            }
        } else {
            value.clone()
        }
    } else {
        value.clone()
    }
}
