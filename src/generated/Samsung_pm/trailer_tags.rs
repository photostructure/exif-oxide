//! Generated tag table definitions from Samsung::Trailer
//!
//! This file is auto-generated by codegen/src/strategies/tag_kit.rs. Do not edit manually.

use crate::types::{PrintConv, TagInfo, ValueConv};
use std::collections::HashMap;
use std::sync::LazyLock;

// Generated imports for conversion functions
use crate::generated::functions::hash_3a::ast_print_3a205edef25c6138;
use crate::generated::functions::hash_3d::ast_value_3d5f3b1c3b62a799;

/// Tag definitions for Samsung::Trailer table
pub static SAMSUNG_TRAILER_TAGS: LazyLock<HashMap<u16, TagInfo>> = LazyLock::new(|| {
    HashMap::from([
        (
            0,
            TagInfo {
                name: "DepthMapName",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            256,
            TagInfo {
                name: "EmbeddedAudioFile",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            513,
            TagInfo {
                name: "SurroundShotVideo",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            2561,
            TagInfo {
                name: "TimeStamp",
                format: "unknown",
                print_conv: Some(PrintConv::Function(ast_print_3a205edef25c6138)),
                value_conv: Some(ValueConv::Function(ast_value_3d5f3b1c3b62a799)),
            },
        ),
        (
            2592,
            TagInfo {
                name: "DualCameraImage",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            2608,
            TagInfo {
                name: "EmbeddedVideoFile",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            2721,
            TagInfo {
                name: "MCCData",
                format: "unknown",
                print_conv: Some(PrintConv::Simple(std::collections::HashMap::from([
                    ("202".to_string(), "Greece (202)"),
                    ("204".to_string(), "Netherlands (204)"),
                    ("206".to_string(), "Belgium (206)"),
                    ("208".to_string(), "France (208)"),
                    ("212".to_string(), "Monaco (212)"),
                    ("213".to_string(), "Andorra (213)"),
                    ("214".to_string(), "Spain (214)"),
                    ("216".to_string(), "Hungary (216)"),
                    ("218".to_string(), "Bosnia & Herzegov. (218)"),
                    ("219".to_string(), "Croatia (219)"),
                    ("220".to_string(), "Serbia (220)"),
                    ("221".to_string(), "Kosovo (221)"),
                    ("222".to_string(), "Italy (222)"),
                    ("226".to_string(), "Romania (226)"),
                    ("228".to_string(), "Switzerland (228)"),
                    ("230".to_string(), "Czech Rep. (230)"),
                    ("231".to_string(), "Slovakia (231)"),
                    ("232".to_string(), "Austria (232)"),
                    ("234".to_string(), "United Kingdom (234)"),
                    ("235".to_string(), "United Kingdom (235)"),
                    ("238".to_string(), "Denmark (238)"),
                    ("240".to_string(), "Sweden (240)"),
                    ("242".to_string(), "Norway (242)"),
                    ("244".to_string(), "Finland (244)"),
                    ("246".to_string(), "Lithuania (246)"),
                    ("247".to_string(), "Latvia (247)"),
                    ("248".to_string(), "Estonia (248)"),
                    ("250".to_string(), "Russian Federation (250)"),
                    ("255".to_string(), "Ukraine (255)"),
                    ("257".to_string(), "Belarus (257)"),
                    ("259".to_string(), "Moldova (259)"),
                    ("260".to_string(), "Poland (260)"),
                    ("262".to_string(), "Germany (262)"),
                    ("266".to_string(), "Gibraltar (266)"),
                    ("268".to_string(), "Portugal (268)"),
                    ("270".to_string(), "Luxembourg (270)"),
                    ("272".to_string(), "Ireland (272)"),
                    ("274".to_string(), "Iceland (274)"),
                    ("276".to_string(), "Albania (276)"),
                    ("278".to_string(), "Malta (278)"),
                    ("280".to_string(), "Cyprus (280)"),
                    ("282".to_string(), "Georgia (282)"),
                    ("283".to_string(), "Armenia (283)"),
                    ("284".to_string(), "Bulgaria (284)"),
                    ("286".to_string(), "Turkey (286)"),
                    ("288".to_string(), "Faroe Islands (288)"),
                    ("289".to_string(), "Abkhazia (289)"),
                    ("290".to_string(), "Greenland (290)"),
                    ("292".to_string(), "San Marino (292)"),
                    ("293".to_string(), "Slovenia (293)"),
                    ("294".to_string(), "Macedonia (294)"),
                    ("295".to_string(), "Liechtenstein (295)"),
                    ("297".to_string(), "Montenegro (297)"),
                    ("302".to_string(), "Canada (302)"),
                    ("308".to_string(), "St. Pierre & Miquelon (308)"),
                    ("310".to_string(), "United States / Guam (310)"),
                    ("311".to_string(), "United States / Guam (311)"),
                    ("312".to_string(), "United States (312)"),
                    ("316".to_string(), "United States (316)"),
                    ("330".to_string(), "Puerto Rico (330)"),
                    ("334".to_string(), "Mexico (334)"),
                    ("338".to_string(), "Jamaica (338)"),
                    (
                        "340".to_string(),
                        "French Guiana / Guadeloupe / Martinique (340)",
                    ),
                    ("342".to_string(), "Barbados (342)"),
                    ("344".to_string(), "Antigua and Barbuda (344)"),
                    ("346".to_string(), "Cayman Islands (346)"),
                    ("348".to_string(), "British Virgin Islands (348)"),
                    ("350".to_string(), "Bermuda (350)"),
                    ("352".to_string(), "Grenada (352)"),
                    ("354".to_string(), "Montserrat (354)"),
                    ("356".to_string(), "Saint Kitts and Nevis (356)"),
                    ("358".to_string(), "Saint Lucia (358)"),
                    ("360".to_string(), "St. Vincent & Gren. (360)"),
                    (
                        "362".to_string(),
                        "Bonaire, Sint Eustatius and Saba / Curacao / Netherlands Antilles (362)",
                    ),
                    ("363".to_string(), "Aruba (363)"),
                    ("364".to_string(), "Bahamas (364)"),
                    ("365".to_string(), "Anguilla (365)"),
                    ("366".to_string(), "Dominica (366)"),
                    ("368".to_string(), "Cuba (368)"),
                    ("370".to_string(), "Dominican Republic (370)"),
                    ("372".to_string(), "Haiti (372)"),
                    ("374".to_string(), "Trinidad and Tobago (374)"),
                    (
                        "376".to_string(),
                        "Turks and Caicos Islands / US Virgin Islands (376)",
                    ),
                    ("400".to_string(), "Azerbaijan (400)"),
                    ("401".to_string(), "Kazakhstan (401)"),
                    ("402".to_string(), "Bhutan (402)"),
                    ("404".to_string(), "India (404)"),
                    ("405".to_string(), "India (405)"),
                    ("410".to_string(), "Pakistan (410)"),
                    ("412".to_string(), "Afghanistan (412)"),
                    ("413".to_string(), "Sri Lanka (413)"),
                    ("414".to_string(), "Myanmar (Burma) (414)"),
                    ("415".to_string(), "Lebanon (415)"),
                    ("416".to_string(), "Jordan (416)"),
                    ("417".to_string(), "Syrian Arab Republic (417)"),
                    ("418".to_string(), "Iraq (418)"),
                    ("419".to_string(), "Kuwait (419)"),
                    ("420".to_string(), "Saudi Arabia (420)"),
                    ("421".to_string(), "Yemen (421)"),
                    ("422".to_string(), "Oman (422)"),
                    ("424".to_string(), "United Arab Emirates (424)"),
                    ("425".to_string(), "Israel / Palestinian Territory (425)"),
                    ("426".to_string(), "Bahrain (426)"),
                    ("427".to_string(), "Qatar (427)"),
                    ("428".to_string(), "Mongolia (428)"),
                    ("429".to_string(), "Nepal (429)"),
                    ("430".to_string(), "United Arab Emirates (430)"),
                    ("431".to_string(), "United Arab Emirates (431)"),
                    ("432".to_string(), "Iran (432)"),
                    ("434".to_string(), "Uzbekistan (434)"),
                    ("436".to_string(), "Tajikistan (436)"),
                    ("437".to_string(), "Kyrgyzstan (437)"),
                    ("438".to_string(), "Turkmenistan (438)"),
                    ("440".to_string(), "Japan (440)"),
                    ("441".to_string(), "Japan (441)"),
                    ("450".to_string(), "South Korea (450)"),
                    ("452".to_string(), "Viet Nam (452)"),
                    ("454".to_string(), "Hongkong, China (454)"),
                    ("455".to_string(), "Macao, China (455)"),
                    ("456".to_string(), "Cambodia (456)"),
                    ("457".to_string(), "Laos P.D.R. (457)"),
                    ("460".to_string(), "China (460)"),
                    ("466".to_string(), "Taiwan (466)"),
                    ("467".to_string(), "North Korea (467)"),
                    ("470".to_string(), "Bangladesh (470)"),
                    ("472".to_string(), "Maldives (472)"),
                    ("502".to_string(), "Malaysia (502)"),
                    ("505".to_string(), "Australia (505)"),
                    ("510".to_string(), "Indonesia (510)"),
                    ("514".to_string(), "Timor-Leste (514)"),
                    ("515".to_string(), "Philippines (515)"),
                    ("520".to_string(), "Thailand (520)"),
                    ("525".to_string(), "Singapore (525)"),
                    ("528".to_string(), "Brunei Darussalam (528)"),
                    ("530".to_string(), "New Zealand (530)"),
                    ("537".to_string(), "Papua New Guinea (537)"),
                    ("539".to_string(), "Tonga (539)"),
                    ("540".to_string(), "Solomon Islands (540)"),
                    ("541".to_string(), "Vanuatu (541)"),
                    ("542".to_string(), "Fiji (542)"),
                    ("544".to_string(), "American Samoa (544)"),
                    ("545".to_string(), "Kiribati (545)"),
                    ("546".to_string(), "New Caledonia (546)"),
                    ("547".to_string(), "French Polynesia (547)"),
                    ("548".to_string(), "Cook Islands (548)"),
                    ("549".to_string(), "Samoa (549)"),
                    ("550".to_string(), "Micronesia (550)"),
                    ("552".to_string(), "Palau (552)"),
                    ("553".to_string(), "Tuvalu (553)"),
                    ("555".to_string(), "Niue (555)"),
                    ("602".to_string(), "Egypt (602)"),
                    ("603".to_string(), "Algeria (603)"),
                    ("604".to_string(), "Morocco (604)"),
                    ("605".to_string(), "Tunisia (605)"),
                    ("606".to_string(), "Libya (606)"),
                    ("607".to_string(), "Gambia (607)"),
                    ("608".to_string(), "Senegal (608)"),
                    ("609".to_string(), "Mauritania (609)"),
                    ("610".to_string(), "Mali (610)"),
                    ("611".to_string(), "Guinea (611)"),
                    ("612".to_string(), "Ivory Coast (612)"),
                    ("613".to_string(), "Burkina Faso (613)"),
                    ("614".to_string(), "Niger (614)"),
                    ("615".to_string(), "Togo (615)"),
                    ("616".to_string(), "Benin (616)"),
                    ("617".to_string(), "Mauritius (617)"),
                    ("618".to_string(), "Liberia (618)"),
                    ("619".to_string(), "Sierra Leone (619)"),
                    ("620".to_string(), "Ghana (620)"),
                    ("621".to_string(), "Nigeria (621)"),
                    ("622".to_string(), "Chad (622)"),
                    ("623".to_string(), "Central African Rep. (623)"),
                    ("624".to_string(), "Cameroon (624)"),
                    ("625".to_string(), "Cape Verde (625)"),
                    ("626".to_string(), "Sao Tome & Principe (626)"),
                    ("627".to_string(), "Equatorial Guinea (627)"),
                    ("628".to_string(), "Gabon (628)"),
                    ("629".to_string(), "Congo, Republic (629)"),
                    ("630".to_string(), "Congo, Dem. Rep. (630)"),
                    ("631".to_string(), "Angola (631)"),
                    ("632".to_string(), "Guinea-Bissau (632)"),
                    ("633".to_string(), "Seychelles (633)"),
                    ("634".to_string(), "Sudan (634)"),
                    ("635".to_string(), "Rwanda (635)"),
                    ("636".to_string(), "Ethiopia (636)"),
                    ("637".to_string(), "Somalia (637)"),
                    ("638".to_string(), "Djibouti (638)"),
                    ("639".to_string(), "Kenya (639)"),
                    ("640".to_string(), "Tanzania (640)"),
                    ("641".to_string(), "Uganda (641)"),
                    ("642".to_string(), "Burundi (642)"),
                    ("643".to_string(), "Mozambique (643)"),
                    ("645".to_string(), "Zambia (645)"),
                    ("646".to_string(), "Madagascar (646)"),
                    ("647".to_string(), "Reunion (647)"),
                    ("648".to_string(), "Zimbabwe (648)"),
                    ("649".to_string(), "Namibia (649)"),
                    ("650".to_string(), "Malawi (650)"),
                    ("651".to_string(), "Lesotho (651)"),
                    ("652".to_string(), "Botswana (652)"),
                    ("653".to_string(), "Swaziland (653)"),
                    ("654".to_string(), "Comoros (654)"),
                    ("655".to_string(), "South Africa (655)"),
                    ("657".to_string(), "Eritrea (657)"),
                    ("659".to_string(), "South Sudan (659)"),
                    ("702".to_string(), "Belize (702)"),
                    ("704".to_string(), "Guatemala (704)"),
                    ("706".to_string(), "El Salvador (706)"),
                    ("708".to_string(), "Honduras (708)"),
                    ("710".to_string(), "Nicaragua (710)"),
                    ("712".to_string(), "Costa Rica (712)"),
                    ("714".to_string(), "Panama (714)"),
                    ("716".to_string(), "Peru (716)"),
                    ("722".to_string(), "Argentina Republic (722)"),
                    ("724".to_string(), "Brazil (724)"),
                    ("730".to_string(), "Chile (730)"),
                    ("732".to_string(), "Colombia (732)"),
                    ("734".to_string(), "Venezuela (734)"),
                    ("736".to_string(), "Bolivia (736)"),
                    ("738".to_string(), "Guyana (738)"),
                    ("740".to_string(), "Ecuador (740)"),
                    ("744".to_string(), "Paraguay (744)"),
                    ("746".to_string(), "Suriname (746)"),
                    ("748".to_string(), "Uruguay (748)"),
                    ("750".to_string(), "Falkland Islands (Malvinas) (750)"),
                    (
                        "901".to_string(),
                        "International Networks / Satellite Networks (901)",
                    ),
                ]))),
                value_conv: None,
            },
        ),
        (
            2739,
            TagInfo {
                name: "DualShotExtra",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            2880,
            TagInfo {
                name: "SingleShotMeta",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            2881,
            TagInfo {
                name: "SingleShotDepthMap",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            3473,
            TagInfo {
                name: "PEg_Info",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
        (
            3649,
            TagInfo {
                name: "VideoEditedTimeZone",
                format: "unknown",
                print_conv: None,
                value_conv: None,
            },
        ),
    ])
});

/// Apply ValueConv transformation for tags in this table
pub fn apply_value_conv(
    tag_id: u32,
    value: &crate::types::TagValue,
    _errors: &mut Vec<String>,
) -> Result<crate::types::TagValue, crate::types::ExifError> {
    let tag_id_u16 = tag_id as u16;
    if let Some(tag_def) = SAMSUNG_TRAILER_TAGS.get(&tag_id_u16) {
        if let Some(ref value_conv) = tag_def.value_conv {
            match value_conv {
                ValueConv::None => Ok(value.clone()),
                ValueConv::Function(func) => func(value, None),
                ValueConv::Expression(_expr) => {
                    // Runtime expression evaluation removed - all Perl interpretation happens via PPI at build time
                    Err(crate::types::ExifError::NotImplemented("Runtime expression evaluation not supported - should be handled by PPI at build time".to_string()))
                }
                _ => Ok(value.clone()),
            }
        } else {
            Ok(value.clone())
        }
    } else {
        Err(crate::types::ExifError::ParseError(format!(
            "Tag 0x{:04x} not found in table",
            tag_id
        )))
    }
}

/// Apply PrintConv transformation for tags in this table
pub fn apply_print_conv(
    tag_id: u32,
    value: &crate::types::TagValue,
    _errors: &mut Vec<String>,
    _warnings: &mut Vec<String>,
) -> crate::types::TagValue {
    let tag_id_u16 = tag_id as u16;
    if let Some(tag_def) = SAMSUNG_TRAILER_TAGS.get(&tag_id_u16) {
        if let Some(ref print_conv) = tag_def.print_conv {
            match print_conv {
                PrintConv::None => value.clone(),
                PrintConv::Function(func) => func(value, None),
                PrintConv::Simple(lookup) => {
                    // Look up value in the hash map
                    // ExifTool uses the stringified value as the key
                    let key = value.to_string();
                    if let Some(display_value) = lookup.get(&key) {
                        crate::types::TagValue::String(display_value.to_string())
                    } else {
                        // Key not found - return original value
                        value.clone()
                    }
                }
                PrintConv::Expression(_expr) => {
                    // Runtime expression evaluation removed - all Perl interpretation happens via PPI at build time
                    value.clone() // Fallback to original value when expression not handled by PPI
                }
                _ => value.clone(),
            }
        } else {
            value.clone()
        }
    } else {
        value.clone()
    }
}
