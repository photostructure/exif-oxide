//! Tag kits for datetime category from Exif.pm
//!
//! This file is automatically generated by codegen.
//! DO NOT EDIT MANUALLY - changes will be overwritten.

#![allow(unused_imports)]
#![allow(unused_mut)]
#![allow(dead_code)]
#![allow(unused_variables)]

use super::*;
use super::{PrintConvType, SubDirectoryType, TagKitDef};
use crate::types::TagValue;
use std::collections::HashMap;
use std::sync::LazyLock;

/// Get tag definitions for datetime category
pub fn get_datetime_tags() -> Vec<(u32, TagKitDef)> {
    vec![
        (0, TagKitDef {
            id: 0,
            name: "DateTimeOriginal",
            format: "unknown",
            groups: HashMap::new(),
            writable: false,
            notes: None,
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: Some("\n            return $val[0] if $val[0] and $val[0]=~/ /;\n            return \"$val[1] $val[2]\";\n        "),
            subdirectory: None,
        }),
        (0, TagKitDef {
            id: 0,
            name: "SubSecCreateDate",
            format: "1",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (0, TagKitDef {
            id: 0,
            name: "SubSecDateTimeOriginal",
            format: "1",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (0, TagKitDef {
            id: 0,
            name: "SubSecModifyDate",
            format: "1",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (20531, TagKitDef {
            id: 20531,
            name: "ThumbnailDateTime",
            format: "unknown",
            groups: HashMap::new(),
            writable: false,
            notes: None,
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (306, TagKitDef {
            id: 306,
            name: "ModifyDate",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("called DateTime by the EXIF spec."),
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (33434, TagKitDef {
            id: 33434,
            name: "ExposureTime",
            format: "rational64u",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression("Image::ExifTool::Exif::PrintExposureTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (34858, TagKitDef {
            id: 34858,
            name: "TimeZoneOffset",
            format: "int16s",
            groups: HashMap::new(),
            writable: true,
            notes: Some("1 or 2 values: 1. The time zone offset of DateTimeOriginal from GMT in\n            hours, 2. If present, the time zone offset of ModifyDate"),
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (34859, TagKitDef {
            id: 34859,
            name: "SelfTimerMode",
            format: "int16u",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (36867, TagKitDef {
            id: 36867,
            name: "DateTimeOriginal",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("date/time when original image was taken"),
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (36868, TagKitDef {
            id: 36868,
            name: "CreateDate",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("called DateTimeDigitized by the EXIF spec."),
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: None,
            subdirectory: None,
        }),
        (36880, TagKitDef {
            id: 36880,
            name: "OffsetTime",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("time zone for ModifyDate"),
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (36881, TagKitDef {
            id: 36881,
            name: "OffsetTimeOriginal",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("time zone for DateTimeOriginal"),
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (36882, TagKitDef {
            id: 36882,
            name: "OffsetTimeDigitized",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("time zone for CreateDate"),
            print_conv: PrintConvType::None,
            value_conv: None,
            subdirectory: None,
        }),
        (37520, TagKitDef {
            id: 37520,
            name: "SubSecTime",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("fractional seconds for ModifyDate"),
            print_conv: PrintConvType::None,
            value_conv: Some("trim_whitespace_value_conv"),
            subdirectory: None,
        }),
        (37521, TagKitDef {
            id: 37521,
            name: "SubSecTimeOriginal",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("fractional seconds for DateTimeOriginal"),
            print_conv: PrintConvType::None,
            value_conv: Some("trim_whitespace_value_conv"),
            subdirectory: None,
        }),
        (37522, TagKitDef {
            id: 37522,
            name: "SubSecTimeDigitized",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: Some("fractional seconds for CreateDate"),
            print_conv: PrintConvType::None,
            value_conv: Some("trim_whitespace_value_conv"),
            subdirectory: None,
        }),
        (42082, TagKitDef {
            id: 42082,
            name: "CompositeImageExposureTimes",
            format: "undef",
            groups: HashMap::new(),
            writable: true,
            notes: Some("11 or more values: 1. Total exposure time period, 2. Total exposure of all\n            source images, 3. Total exposure of all used images, 4. Max exposure time of\n            source images, 5. Max exposure time of used images, 6. Min exposure time of\n            source images, 7. Min exposure of used images, 8. Number of sequences, 9.\n            Number of source images in sequence. 10-N. Exposure times of each source\n            image. Called SourceExposureTimesOfCompositeImage by the EXIF spec."),
            print_conv: PrintConvType::Manual("code_ref_printconv"),
            value_conv: None,
            subdirectory: None,
        }),
        (50971, TagKitDef {
            id: 50971,
            name: "PreviewDateTime",
            format: "string",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression("$self->ConvertDateTime($val)"),
            value_conv: Some("\n            require Image::ExifTool::XMP;\n            return Image::ExifTool::XMP::ConvertXMPDate($val);\n        "),
            subdirectory: None,
        }),
        (51043, TagKitDef {
            id: 51043,
            name: "TimeCodes",
            format: "int8u",
            groups: HashMap::new(),
            writable: true,
            notes: None,
            print_conv: PrintConvType::Expression(r#"
            our @a = map hex, split /[. ]+/, $val;
            my @v;
            while (@a >= 8) {
                my $str = sprintf("%.2x:%.2x:%.2x.%.2x", $a[3]&0x3f,
                                 $a[2]&0x7f, $a[1]&0x7f, $a[0]&0x3f);
                if ($a[3] & 0x80) { # date+timezone exist if BGF2 is set
                    my $tz = $a[7] & 0x3f;
                    my $bz = sprintf('%.2x', $tz);
                    $bz = 100 if $bz =~ /[a-f]/i; # not BCD
                    if ($bz < 26) {
                        $tz = ($bz < 13 ? 0 : 26) - $bz;
                    } elsif ($bz == 32) {
                        $tz = 12.75;
                    } elsif ($bz >= 28 and $bz <= 31) {
                        $tz = 0;    # UTC
                    } elsif ($bz < 100) {
                        undef $tz;  # undefined or user-defined
                    } elsif ($tz < 0x20) {
                        $tz = (($tz < 0x10 ? 10 : 20) - $tz) - 0.5;
                    } else {
                        $tz = (($tz < 0x30 ? 53 : 63) - $tz) + 0.5;
                    }
                    if ($a[7] & 0x80) { # MJD format (/w UTC time)
                        my ($h,$m,$s,$f) = split /[:.]/, $str;
                        my $jday = sprintf('%x%.2x%.2x', reverse @a[4..6]);
                        $str = ConvertUnixTime(($jday - 40587) * 24 * 3600
                                 + ((($h+$tz) * 60) + $m) * 60 + $s) . ".$f";
                        $str =~ s/^(\d+):(\d+):(\d+) /$1-$2-${3}T/;
                    } else { # YYMMDD (Note: CinemaDNG 1.1 example seems wrong)
                        my $yr = sprintf('%.2x',$a[6]) + 1900;
                        $yr += 100 if $yr < 1970;
                        $str = sprintf('%d-%.2x-%.2xT%s',$yr,$a[5],$a[4],$str);
                    }
                    $str .= TimeZoneString($tz*60) if defined $tz;
                }
                push @v, $str;
                splice @a, 0, 8;
            }
            join ' ', @v;
        "#),
            value_conv: Some("\n            our @a = split ' ', $val;\n            my @v;\n            push @v, join('.', map { sprintf('%.2x',$_) } splice(@a,0,8)) while @a >= 8;\n            join ' ', @v;\n        "),
            subdirectory: None,
        }),
    ]
}
